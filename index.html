<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Real-time Instagram-style Filters (Canvas)</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 0; background:#0b0d10; color:#eaeef3; }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 16px; display: grid; gap: 14px; }
    .top { display:flex; gap: 12px; flex-wrap: wrap; align-items: center; }
    .card { background:#12161c; border:1px solid #1f2630; border-radius: 14px; padding: 14px; }
    canvas { width: 100%; height: auto; border-radius: 14px; background:#0d1015; }
    label { display:flex; gap: 10px; align-items:center; justify-content: space-between; margin: 10px 0; }
    input[type="range"] { width: 62%; }
    select, input[type="file"], button { background:#0f141b; color:#eaeef3; border:1px solid #263041; border-radius: 10px; padding: 8px 10px; }
    button { cursor:pointer; }
    .grid { display:grid; grid-template-columns: 1.3fr 0.7fr; gap: 14px; }
    @media (max-width: 900px) { .grid { grid-template-columns: 1fr; } input[type="range"]{ width: 60%; } }
    .hint { color:#a8b3c5; font-size: 13px; line-height: 1.4; margin-top: 8px; }
    .row { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .badge { font-size:12px; color:#a8b3c5; padding:4px 8px; border:1px solid #263041; border-radius:999px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card top">
      <div class="row">
        <input id="file" type="file" accept="image/*" />
        <select id="preset"></select>
        <button id="reset">Reset</button>
        <button id="save">Save PNG</button>
      </div>
      <span class="badge" id="fps">fps: -</span>
      <div class="hint">
        Tip: 这版用 Canvas 逐像素处理（CPU）。图片太大时会慢；想更快可用 WebGL shader（需要我也可以给你一版）。
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <canvas id="cv"></canvas>
      </div>

      <div class="card">
        <label>
          Strength
          <input id="strength" type="range" min="0" max="1" step="0.01" value="0.85" />
          <span id="strengthV">0.85</span>
        </label>
        <label>
          Exposure
          <input id="exposure" type="range" min="-0.6" max="0.6" step="0.01" value="0.05" />
          <span id="exposureV">0.05</span>
        </label>
        <label>
          Contrast
          <input id="contrast" type="range" min="0.6" max="1.6" step="0.01" value="1.10" />
          <span id="contrastV">1.10</span>
        </label>
        <label>
          Saturation
          <input id="saturation" type="range" min="0" max="2" step="0.01" value="1.15" />
          <span id="saturationV">1.15</span>
        </label>
        <label>
          Temperature
          <input id="temp" type="range" min="-0.3" max="0.3" step="0.01" value="0.06" />
          <span id="tempV">0.06</span>
        </label>
        <label>
          Fade (Matte)
          <input id="fade" type="range" min="0" max="0.5" step="0.01" value="0.12" />
          <span id="fadeV">0.12</span>
        </label>
        <label>
          Vignette
          <input id="vignette" type="range" min="0" max="0.8" step="0.01" value="0.22" />
          <span id="vignetteV">0.22</span>
        </label>
        <label>
          Grain
          <input id="grain" type="range" min="0" max="0.5" step="0.01" value="0.10" />
          <span id="grainV">0.10</span>
        </label>

        <div class="hint">
          Preset 会自动把这些参数设置到一套“类似 IG 风格”的配方，你也可以再手动微调。
        </div>
      </div>
    </div>
  </div>

<script src="main.js"></script>
</body>
</html>

